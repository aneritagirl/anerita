<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>MYQER â€” MVP Offline/Online Hybrid QR</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 2rem; }
    #qr { image-rendering: pixelated; }
  </style>
</head>
<body>
  <h1>MYQER â€” Hybrid QR Demo</h1>
  <canvas id="qr" width="300" height="300" aria-label="QR"></canvas>

  <script>
    const profile = {
      name: "Anita Boros",
      dob: "1988-10-13",
      country: "GB",
      blood: "O+",
      allergies: "Penicillin, Codeine, Midazolam",
      conditions: "Alport Syndrome",
      donor: "Y",
      url: "https://myqer.com/c/6P6NH6" // short-code URL
    };

    // ðŸ‘‰ URL first (no "URL:" label, no leading spaces), then the offline text
    const payload =
`${profile.url}

Name: ${profile.name}
DOB: ${profile.dob}
Country: ${profile.country}
BT: ${profile.blood}
ALG: ${profile.allergies}
COND: ${profile.conditions}
DONOR: ${profile.donor}`;

    const canvas = document.getElementById('qr');

    QRCode.toCanvas(
      canvas,
      payload,
      {
        width: 300,
        margin: 4,
        errorCorrectionLevel: 'H'
      },
      (err) => {
        if (err) {
          console.error('QR error:', err);
          return;
        }
        // ensure no smoothing blur
        const ctx = canvas.getContext('2d');
        if (ctx) ctx.imageSmoothingEnabled = false;
        console.log('âœ… QR generated');
      }
    );
  </script>
</body>
</html>
